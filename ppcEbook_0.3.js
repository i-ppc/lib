var searchData={content:"",time:""},ppcEbook=ppcEbook||{};!function(e){var t,a,n=[],o=0,i=[],r=1,s=[],d=[],l=!1,c="CE",u="bookmark",p=!1;pdfJs.defaultViewer=new pdfJs.Viewer({outline_id:"bookmarkOutline"});var g=pdfJs.defaultViewer;e.viewer=g;function h(t,a){e.disableScroll();var n,o,i=/translate\((-?[\d\.]+)px,\s*(-?[\d\.]+)px\)/i,r=/scale\((-?[\d\.]+)\)/i,s=t.target,d=g.container;if(d){d.style.transform.match(r);var l=Number(g.scale)}var c=(h=s.style.transform||s.style.webkitTransform).match(i),u=h.match(r),p=(h.match(/rotate\((-?[\d\.]+)deg\)/i),1);u&&(p=Number(u[1])),c?(n=Number(c[1]),o=Number(c[2])):n=o=0,d?(n+=t.dx/l/p,o+=t.dy/l/p):(n+=t.dx,o+=t.dy);var h,v="translate("+n+"px, "+o+"px)";(s.style.webkitTransform=s.style.transform=c?h.replace(i,v):h+" "+v,a)&&((h=a.get()||{}).x=n,h.y=o,a.set(h))}e.preventDefault=function(e){/touch/.test(e.type),e.preventDefault()},e.getCurPgIdx=function(){return g.cur_page_idx+1},e.disableScroll=function(){container.addEventListener("touchmove",this.preventDefault,{passive:!1})},e.enableScroll=function(){container.removeEventListener("touchmove",this.preventDefault,{passive:!1})},e.getViewer=function(){return g},e.getviewHisCounter=function(){return o},e.panDraw=function(){e.enableScroll(),$(".pf").each(function(){var t=$(this).attr("data-page-no");$("#pf"+t+" #svg-container").css("z-index",0),$("#pf"+t+" #svg-container #drawBoard_real_"+e.getCurlangID(t)).css("z-index",0),$("#pf"+t+" #svg-container #drawBoard_"+e.getCurlangID(t)).css("z-index",0)})},e.disableDraw=function(){e.enableScroll(),$(".draw-pen-popover").popover("hide"),$(".drawTools").hide(),$(".pf").each(function(){var t=$(this).attr("data-page-no");$("#pf"+t+" #svg-container").css("z-index",0),$("#pf"+t+" #svg-container #drawBoard_real_"+e.getCurlangID(t)).css("z-index",0),$("#pf"+t+" #svg-container #drawBoard_"+e.getCurlangID(t)).css("z-index",0)}),$(".drawTools .popover-body .active").removeClass("active"),e.drawMove(!1),drawOption.shape=drawOption["default-shape"];var t="draw-"+drawOption["default-shape"];$("."+t).addClass("active")},e.enableDraw=function(){e.disableScroll(),!0,!1,l=!1,$(".pf").each(function(){var t=$(this).attr("data-page-no");$("#pf"+t+" #svg-container").css("z-index",30),$("#pf"+t+" #svg-container #drawBoard_real_"+e.getCurlangID(t)).css("z-index",0),$("#pf"+t+" #svg-container #drawBoard_"+e.getCurlangID(t)).css("z-index",30)})},e.drawMove=function(t){t?(!1,!0,l=!1,e.disableScroll(),$(".pf").each(function(){var t=$(this).attr("data-page-no");$("#pf"+t+" #svg-container").css("z-index",30),$("#pf"+t+" #svg-container #drawBoard_real_"+e.getCurlangID(t)).css("z-index",30),$("#pf"+t+" #svg-container #drawBoard_"+e.getCurlangID(t)).css("z-index",0),s[e.getCurlangID(t)].each(function(e,t){this.draggable()})})):(!1,!1,l=!1,e.enableScroll(),$(".pf").each(function(){var t=$(this).attr("data-page-no");$("#pf"+t+" #svg-container").css("z-index",0),$("#pf"+t+" #svg-container #drawBoard_real_"+e.getCurlangID(t)).css("z-index",0),$("#pf"+t+" #svg-container #drawBoard_"+e.getCurlangID(t)).css("z-index",0)}))},e.drawRemove=function(t){!1,!1,l=!0,e.disableScroll(),$(".pf").each(function(){var t=$(this).attr("data-page-no");$("#pf"+t+" #svg-container").css("z-index",30),$("#pf"+t+" #svg-container #drawBoard_real_"+e.getCurlangID(t)).css("z-index",30),$("#pf"+t+" #svg-container #drawBoard_"+e.getCurlangID(t)).css("z-index",0),s[e.getCurlangID(t)].each(function(e,t){var a=this;this.draggable(!1),this.click(function(){l&&a.remove()}),this.on("touchstart",function(){l&&a.remove()})})})},e.cleanPg=function(t){$("#pf"+t+" #svg-container").css("z-index",30),$("#pf"+t+" #svg-container #drawBoard_real_"+e.getCurlangID(t)).css("z-index",30),$("#pf"+t+" #svg-container #drawBoard_"+e.getCurlangID(t)).css("z-index",0),s[e.getCurlangID(t)].each(function(e,t){this.remove()}),!0,l=!1,!1,e.enableDraw()},e.drawRemoveAll=function(t){!1,!1,l=!0,e.disableScroll();var a=e.getCurPgIdx();doublePage?($("#removeAllMod").modal("show"),a%2==0?($("#removeAllMod #btn-left").text(getBkPage(a-1)),$("#removeAllMod #btn-left").attr("data-target",a-1),$("#removeAllMod #btn-right").text(getBkPage(a)),$("#removeAllMod #btn-right").attr("data-target",a)):($("#removeAllMod #btn-left").text(getBkPage(a)),$("#removeAllMod #btn-left").attr("data-target",a),$("#removeAllMod #btn-right").text(getBkPage(a+1)),$("#removeAllMod #btn-right").attr("data-target",a+1))):e.cleanPg(a)},e.updatePg=function(){g.schedule_render(!0),$("#pgInputBox").val("");var t=getBkPage(e.getCurPgIdx());$("#pgInputBox").text(t+"/"+$(".pf").length),$("#pgInputBox").attr("placeholder",t+"/"+($(".pf").length-pageContent["index_"+c].length))},e.update_page_idx=function(){g.update_page_idx()},e.updateThumb=function(){if($("#sidebar").hasClass("visible")){var e=document.getElementById("thumb-"+(g.cur_page_idx+1)+"-"+c).offsetTop+document.getElementById("thumbContent").offsetTop-document.getElementById("thumbContent").getBoundingClientRect().height/2;$("#thumbContent .active").removeClass("active"),$("#thumb-"+(g.cur_page_idx+1)+"-"+c).addClass("active"),$("#thumbContent")[0].scrollTop=e}},e.jump=function(t){e.recordView(),t>=1&&t<=$(".pf").length&&(g.scroll_to(t-1),g.cur_page_idx=t-1,0==EbookMode&&(e.updatePg(),e.updateThumb())),e.updateLastView()},e.getCurlang=function(){return c},e.getCurlangID=function(e){return"EE"==bookMode||"CE"==bookMode?e:e+"_"+c},e.setCurlang=function(t){"CE"==(c=t)?($("#changeLang").bootstrapToggle("off"),e.switchLang("EE")):($("#changeLang").bootstrapToggle("on"),e.switchLang("CE"))},e.recordView=function(){var t=g.get_current_view_hash();o!=n.length-1&&n.splice(o+1,n.length-1),n.length<9999?(n[o]=t,o++):(o=9999,n.shift(),n.push(t)),e.updateViewBtn()},e.updateLastView=function(){1==EbookMode&&g.update_page_idx();var e=g.get_current_view_hash();t=e},e.updateViewBtn=function(){o<=0?($("#backward").addClass("disabled"),$("#backward").attr("disabled",!0)):($("#backward").removeClass("disabled"),$("#backward").attr("disabled",!1)),o==n.length?($("#forward").addClass("disabled"),$("#forward").attr("disabled",!0)):($("#forward").removeClass("disabled"),$("#forward").attr("disabled",!1))},e.goBackward=function(){if(o>0){var t=n[--o];g.navigate_to_dest(t)}e.updateViewBtn()},e.goForward=function(){if(o<9999)if(o==n.length)null!=(a=t)?g.navigate_to_dest(a):o--;else if(null!=(a=n[++o]))g.navigate_to_dest(a);else{var a=t;g.navigate_to_dest(a)}else if(9999==o){null!=(a=n[9999])?g.navigate_to_dest(a):o--}e.updateViewBtn()},e.switchLang=function(t){"CE"==t?($(".CE").addClass("closed"),$(".CE").removeClass("opened"),$(".CE").css("visibility","hidden"),$(".EE").not(".ans").addClass("opened"),$(".EE").not(".ans").removeClass("closed"),$(".EE").not(".ans").css("visibility","visible"),$(".EE.ans[data-status=visible]").addClass("opened"),$(".EE.ans[data-status=visible]").removeClass("closed"),$(".EE.ans[data-status=visible]").css("visibility","visible"),$("#thumb").attr("title","Thumb"),$("#draw-pen").attr("title","Drawing Tools"),$("#changeLang").attr("title","Change language"),$(".zoom-in").attr("title","Zoom in"),$(".zoom-out").attr("title","Zoom out"),$(".zoom-fitWidth").attr("title","Fit to width"),$(".zoom-fitHeight").attr("title","Fit to height"),$(".prev").attr("title","Previous Page"),$(".next").attr("title","Next Page"),$(".draw-cleaner").attr("title","Clear all"),$(".draw-eraser").attr("title","Eraser"),$(".draw-pan").attr("title","Scroll"),$(".draw-move").attr("title","Move object"),$(".draw-hightLight border-left").attr("title","Highlight"),$(".draw-path").attr("title","Free draw"),$(".draw-line").attr("title","Straight line"),$(".draw-ellipse").attr("title","Oval"),$(".draw-rect").attr("title","Rectangle"),$("#SaveGroup").attr("title","Save Change"),$("#loadSaveGroup").attr("title","Load Save"),c="EE"):($(".EE").addClass("closed"),$(".EE").removeClass("opened"),$(".EE").css("visibility","hidden"),$(".CE").not(".ans").addClass("opened"),$(".CE").not(".ans").removeClass("closed"),$(".CE").not(".ans").css("visibility","visible"),$(".CE.ans[data-status=visible]").addClass("opened"),$(".CE.ans[data-status=visible]").removeClass("closed"),$(".CE.ans[data-status=visible]").css("visibility","visible"),$("#thumb").attr("title","縮圖"),$("#draw-pen").attr("title","繪畫工具"),$("#changeLang").attr("title","語言轉換"),$(".zoom-in").attr("title","放大"),$(".zoom-out").attr("title","縮小"),$(".zoom-fitWidth").attr("title","符合寬度"),$(".zoom-fitHeight").attr("title","符合高度"),$(".prev").attr("title","上一頁"),$(".next").attr("title","下一頁"),$(".draw-cleaner").attr("title","抹除頁面"),$(".draw-eraser").attr("title","抹除"),$(".draw-pan").attr("title","移動版面"),$(".draw-move").attr("title","移動物件"),$(".draw-hightLight border-left").attr("title","熒光筆"),$(".draw-path").attr("title","自由繪畫"),$(".draw-line").attr("title","直線"),$(".draw-ellipse").attr("title","圓形"),$(".draw-rect").attr("title","矩形"),$("#SaveGroup").attr("title","儲存變更"),$("#loadSaveGroup").attr("title","載入變更"),c="CE"),e.updatePg(),e.updateThumb()},e.createThumb=function(){p||($(".pc .bi").each(function(e,t){var a,n;$(t).hasClass("CE")?lang="CE":lang="EE",n="bg"+(a=$(t).parent().parent().attr("data-page-no"))+".jpg";var o=$("<div/>",{class:"thumb-pg "+lang,id:"thumb-"+a+"-"+lang,onclick:"ppcEbook.jump("+a+")","data-target":$(t).attr("class").split(" ")[1]}).css({padding:"10 0 0 10","text-align":"center"});$("<img/>",{class:"",src:n}).css({"background-color":"#ffffff",display:"block",width:"100%"}).appendTo(o),$("<div/>",{width:"100%",text:getBkPage(a,lang)}).css({"margin-top":"10px"}).appendTo(o);$(o).appendTo("#thumbContent"),$("#sidebar").css("display","none")}),p=!0)},e.init=function(t){var n=document.createElement("script");n.src="http://www.i-ppc.com/public/anschkDataV2/js/paper-full.min.js",document.documentElement.firstChild.appendChild(n);var o=document.createElement("canvas");o.id="canvas-2",o.class="w0 h0",document.getElementsByTagName("body")[0].appendChild(o);var l=window.location.href.split("?");document.getElementById("speedData");var p=decodeURIComponent(l[1]),h=p.split("&");h[1],(p=h[0]).split("."),p.split("#");g.initEvents(!0),e.updateViewBtn(),e.createThumb(),e.setCurlang(defaultLang),"CE"==defaultLang?e.switchLang("EE"):e.switchLang("CE"),$(".zoom-in").on("click touchend",function(e){g.scale;g.rescale(1/g.config.scale_step,!0),g.handled=!0}),$(".zoom-out").on("click touchend",function(e){g.scale;g.rescale(g.config.scale_step,!0),g.handled=!0}),$(".zoom-fitWidth").on("click touchend",function(e){g.scale;g.fit_width()}),$(".zoom-fitHeight").on("click",function(e){g.scale;g.fit_height()}),$(".next").on("click",function(t){doublePage?g.cur_page_idx<$(".pf").length-2?(g.scroll_to(g.cur_page_idx+2),g.cur_page_idx+=2):(g.scroll_to($(".pf").length-1),g.cur_page_idx=$(".pf").length-1):g.cur_page_idx<$(".pf").length-1&&(g.scroll_to(g.cur_page_idx+1),g.cur_page_idx++),0==EbookMode&&(e.updatePg(),e.updateThumb())}),$(".prev").on("click",function(t){doublePage?g.cur_page_idx>=2&&(g.scroll_to(g.cur_page_idx-2),g.cur_page_idx-=2):g.cur_page_idx>=1&&(g.scroll_to(g.cur_page_idx-1),g.cur_page_idx--),0==EbookMode&&(e.updatePg(),e.updateThumb())});var v=!1;$("#page-container").on("scroll",function(){$("#pgInputBox").val(""),$("#pgInputBox").attr("placeholder",e.getCurPgIdx()+"/"+$(".pf").length),r!=e.getCurPgIdx()&&(v?(svg=$(".pc"+e.getCurPgIdx()+" #drawBoard")[0],doc=$(".pc"+e.getCurPgIdx()+" #doc")[0]):doc=$(".pc"+e.getCurPgIdx()+" #doc")[0],r=e.getCurPgIdx()),e.updatePg(),e.updateThumb()});var b=/touch/,f=/mouse/,m=/point/,w={rect:{onmousedown:function(e,t){if($(".drawTools").hide(),!t)t=g.cur_page_idx+1;d[t]=C(t),b.test(e.type)?v&&d[t].draw(e).fill({color:drawOption[drawOption.shape].fill,opacity:drawOption[drawOption.shape]["fill-opacity"]/100}):(e.type.match(f)||e.type.match(m))&&v&&!e.altKey&&d[t]&&d[t].draw(e).fill({color:drawOption[drawOption.shape].fill,opacity:drawOption[drawOption.shape]["fill-opacity"]/100})},onmousemove:"move event inside svg.draw.js",onmouseup:function(e,t){if(!t)t=g.cur_page_idx+1;v&&d[t]&&(d[t].draw("stop",e),d[t].clone(s[t+"_"+c]),i[t+"_"+c].clear(),d[t]=null)}},ellipse:{onmousedown:function(e,t){if($(".drawTools").hide(),!t)t=g.cur_page_idx+1;d[t]=C(t),v&&d[t]&&d[t].draw(e).fill({color:drawOption[drawOption.shape].fill,opacity:drawOption[drawOption.shape]["fill-opacity"]/100})},onmousemove:"move event inside svg.draw.js",onmouseup:function(e,t){if(v){if(!t)t=g.cur_page_idx+1;d[t]&&(d[t].draw("stop",e),d[t].clone(s[t+"_"+c]),i[t+"_"+c].clear(),d[t]=null)}}},line:{onmousedown:function(e,t){if($(".drawTools").hide(),!t)t=g.cur_page_idx+1;d[t]=C(t),v&&d[t]&&d[t].draw(e).stroke({color:drawOption[drawOption.shape].fill,opacity:drawOption[drawOption.shape]["fill-opacity"]/100,width:drawOption[drawOption.shape]["stroke-width"]})},onmousemove:"move event inside svg.draw.js",onmouseup:function(e,t){if(v){if(!t)t=g.cur_page_idx+1;d[t]&&(d[t].draw("stop",e),d[t].clone(s[t+"_"+c]),i[t+"_"+c].clear(),d[t]=null)}}},path:{onmousedown:function(e,t){if($(".drawTools").hide(),!t)t=g.cur_page_idx+1;d[t]=C(t),v&&d[t]&&d[t].draw(e).fill({color: "ffffff", opacity: 0.001}).stroke({color:drawOption[drawOption.shape].fill,opacity:drawOption[drawOption.shape]["fill-opacity"]/100,width:drawOption[drawOption.shape]["stroke-width"]})},onmousemove:"move event inside svg.draw.js",onmouseup:function(e,t){if(v){if(!t)t=g.cur_page_idx+1;d[t]&&(d[t].draw("stop",e),d[t].clone(s[t+"_"+c]),i[t+"_"+c].clear(),d[t]=null)}}},hightLight:{onmousedown:function(e,t){if($(".drawTools").hide(),!t)t=g.cur_page_idx+1;d[t]=C(t),v&&d[t]&&d[t].draw(e,{shape:"hightLight"}).stroke({color:drawOption[drawOption.shape].fill,opacity:drawOption[drawOption.shape]["fill-opacity"]/100,width:drawOption[drawOption.shape]["stroke-width"]})},onmousemove:"move event inside svg.draw.js",onmouseup:function(e,t){if(v){if(!t)t=g.cur_page_idx+1;d[t]&&(d[t].draw("stop",e),d[t].clone(s[t+"_"+c]),i[t+"_"+c].clear(),d[t]=null)}}},move:{onmousedown:function(e,t){draggedObject=doc.transform.baseVal.getItem(0)},onmousemove:function(e){panRelative(currentMovement,draggedObject)},onmouseup:function(e){}},eraser:{onmousedown:function(t){e.drawRemove()}},pan:{onmousedown:function(t){e.panDraw()},onmouseup:function(e){}},cleaner:{onmousedown:function(t){e.drawRemoveAll()}},pen:{onmousedown:function(t){v=!0,e.enableDraw()}},text:{onclick:function(e,t){e.target instanceof SVGTSpanElement?(isHidden(textToolInput)||finishTextInput(),reopenTextInput(e.target)):isHidden(textToolInput)?newTextInput({x:e.pageX,y:e.pageY}):finishTextInput()}}};function C(t){if(!t)t=g.cur_page_idx+1;switch(drawOption.shape){case"rect":return a="rect",i[e.getCurlangID(t)].rect();case"ellipse":return a="ellipse",i[e.getCurlangID(t)].ellipse();case"line":return a="line",i[e.getCurlangID(t)].line();case"hightLight":return a="hightLight",i[e.getCurlangID(t)].line();case"path":return a="path",i[e.getCurlangID(t)].path().fill("none")}}$("body").on("change","#changeLang",function(){e.switchLang(c)}),$(".drawBoardReal").each(function(t,a){var n=parseInt($(this).parent().parent().attr("data-page-no")),o=$(this).attr("id"),r=$(this).attr("id").replace("_real",""),l=(o.substring(o.length-2,o.length),e.getCurlangID(n));i[l]={},s[l]={},i[l]=new SVG(r).size("100%","100%"),s[l]=new SVG(o).size("100%","100%");var c=i[l],u=s[l];u.on("mousedown",function(e){$(".draw-pen-popover").popover("hide")},!1),u.on("touchstart",function(e){$(".draw-pen-popover").popover("hide")},!1);c.on("mousedown",function(e){$(".draw-pen-popover").popover("hide");var t=drawOption.shape;w[t].onmousedown(e,n)},!1),c.on("mouseup",function(e){g.cur_page_idx;var t=drawOption.shape;w[t]&&w[t].onmouseup(e,n)},!1),c.on("touchstart",function(t){$(".draw-pen-popover").popover("hide");var a=g.cur_page_idx+1;d[a]=i[e.getCurlangID(a)].rect();var o=drawOption.shape;w[o].onmousedown(t,n)},!1),c.on("touchend",function(e){g.cur_page_idx;var t=drawOption.shape;w[t].onmouseup(e,n)},!1)}),$("body").on("click",".draw-move",function(){drawOption.shape="move",a="move",e.drawMove(!0),$(".active").removeClass("active"),$(this).addClass("active")}),$("body").on("click",".draw-pan",function(t){e.panDraw(),drawOption.shape="pan",a="pan",$(".active").removeClass("active"),$(this).addClass("active")}),$("body").on("click",".draw-eraser",function(t){e.enableDraw(),drawOption.shape="eraser",a="eraser",w.eraser.onmousedown(t),$(".active").removeClass("active"),$(this).addClass("active")}),$("body").on("click",".draw-cleaner",function(t){e.enableDraw(),w.cleaner.onmousedown(t),w[a]&&w[a].onmousedown(t)}),$("body").on("click",".draw-hightLight, .draw-path, .draw-line, .draw-ellipse, .draw-rect",function(e){w.pen.onmousedown(e)}),$("body").on("click",".draw-pen",function(e){w.pen.onmousedown(e)}),$("body").on("click",".popover .popover-close",function(e){$("#draw-pen").popover("hide"),w.pen.onmousedown(event)}),$("body").on("touchstart pointerdown MSPointerDown mousedown",".pf",function(e){e.altKey||drawOption.shape}),$("body").on("touchend pointerup pointerout MSPointerUp mouseup touchcancel pointercancel MSPointerCancel mousecancel mouseout",".pf",function(e){drawOption.shape}),$("body").on("touchend click",'*[data-type="marker"], *[data-type="showHideAns"], *[data-type="showHideNote"], *[data-type="showHideAnsAll"], *[data-type="showHideNoteAll"]',function(e){switch(e.preventDefault(),e.stopPropagation(),$(this).attr("data-func")){case"showHide":e.shiftKey||e.ctrlKey||function(e,t,a){t.indexOf(".")<0&&t.indexOf("#")<0&&(t="#"+t);a?($(t).css("visibility",a),$(t).attr("data-status",a)):"none"==$(t).css("display")||"hidden"==$(t).css("visibility")?($(t).css("visibility","visible"),$(t).attr("data-status","visible"),$(t).show()):($(t).css("visibility","hidden"),$(t).attr("data-status","hidden"))}(0,$(this).attr("data-target"));break;case"openUrl":if(!e.shiftKey&&!e.ctrlKey){var t=$(this).attr("data-target");window.open(t,"_blank")}break;case"showHideALL":e.shiftKey||e.ctrlKey||(showHideALL($(this).attr("data-target"),$(this).attr("data-status")),"hidden"==$(this).attr("data-status")?$(this).attr("data-status","visible"):$(this).attr("data-status","hidden"))}}),$("#pgBox").on("click",function(t){var a=$("#pgInputBox").val();a.match(/^[a-zA-Z]+$/)?$("#pgInputBox").val(""):(a=parseInt(a),pageContent["index_"+c]?e.jump(a+pageContent["index_"+c].length):e.jump(a-1),$("#pgInputBox").val(""))}),$("#pgInputBox").on("keydown",function(t){if(13===t.keyCode){t.preventDefault();var a=$("#pgInputBox").val();a.match(/^[a-zA-Z]+$/)?$("#pgInputBox").val(""):(a=parseInt(a),pageContent["index_"+c]?e.jump(a+pageContent["index_"+c].length):e.jump(a-1),$("#pgInputBox").val(""))}}),e.disableThumb=function(){$("#sidebarContent").removeClass("visible"),$("#sidebarContent").addClass("invisible d-none"),$("#thumbContent").removeClass("visible"),$("#thumbContent").addClass("invisible  d-none"),$("#sidebar").removeClass("visible d-block"),$("#sidebar").addClass("invisible  d-none")},e.enableThumb=function(){$("#sidebarContent").removeClass("visible d-block"),$("#sidebarContent").addClass("invisible d-none"),$("#thumbContent").addClass("visible d-block"),$("#thumbContent").removeClass("invisible  d-none"),$("#sidebar").removeClass("invisible  d-none"),$("#sidebar").addClass("visible  d-block")},e.disableBookMark=function(){$("#sidebarContent").removeClass("visible"),$("#sidebarContent").addClass("invisible d-none"),$("#thumbContent").removeClass("visible d-none"),$("#thumbContent").addClass("invisible  d-none"),$("#sidebar").removeClass("visible d-block"),$("#sidebar").addClass("invisible  d-none")},e.enableBookMark=function(){$("#thumbContent").removeClass("visible d-block"),$("#thumbContent").addClass("invisible d-none"),$("#sidebarContent").addClass("visible d-block"),$("#sidebarContent").removeClass("invisible  d-none"),$("#sidebar").removeClass("invisible  d-none"),$("#sidebar").addClass("visible  d-block")},e.disableMenu=function(){$("#sidebarContent").removeClass("visible"),$("#sidebarContent").addClass("invisible d-none"),$("#thumbContent").removeClass("visible"),$("#thumbContent").addClass("invisible  d-none"),$("#menu").removeClass("visible"),$("#menu").addClass("invisible"),$("#sidebar").removeClass("visible d-block"),$("#sidebar").addClass("invisible  d-none")},e.enableMenu=function(){$("#sidebarContent").removeClass("visible d-block"),$("#sidebarContent").addClass("invisible d-none"),$("#thumbContent").removeClass("visible"),$("#thumbContent").addClass("invisible  d-none"),$("#menu").addClass("visible d-block"),$("#menu").removeClass("invisible  d-none"),$("#sidebar").removeClass("invisible  d-none"),$("#sidebar").addClass("visible  d-block")},$("body").on("click",".thumb-pg",function(t){e.disableThumb(),$(".thumb-pg").removeClass("active"),$(this).addClass("active")}),$("#content-popover-btn").on("click",function(t){e.disableDraw(),$("#sidebar").hasClass("visible")&&"bookMark"==u?(e.disableThumb(),hasBookMark&&e.disableBookMark(),e.disableMenu()):(e.disableThumb(),e.disableMenu(),hasBookMark&&e.enableBookMark()),u="bookMark"}),e.updateBookMark=function(){var t=e.getCurPgIdx();$(".list-group-item[data-page="+t+"]").length>1&&($("#sidebarContent .list-group-item").removeClass("active"),$(".list-group-item[data-page="+t+"]").addClass("active"))},e.bkmJump=function(t){t.preventDefault();var a=$(t.currentTarget).attr("data-dest-detail"),n=JSON.parse(a);if(!(n instanceof Array))return;for(var o="#pf"+n[0];n.length<7;)n.push(null);let i=801-parseFloat(n[2]);e.goHref(o,i)},e.goHref=function(t,a=0){e.recordView();location.href;var n=t+"";n.match(/#/),(n.match(/[|\\/~^:,.#;?!&%$@*+]/)?document.querySelector(n):document.querySelector("#"+n)).scrollIntoView({block:"start",inline:"end"}),$("#page-container")[0].scrollTop=$("#page-container")[0].scrollTop+a*Number(g.scale),e.disableBookMark(),e.disableMenu(),e.updateLastView(),e.updatePg(),e.updateThumb()},$("#thumb").on("click",function(t){$(".pc .bi");e.disableDraw(),$(".activeP").removeClass("activeP"),$(".normal").addClass("activeP"),e.createThumb(),$("#sidebar").hasClass("visible")&&"thumb"==u?(e.disableThumb(),e.disableBookMark(),e.disableMenu()):(e.disableBookMark(),e.disableMenu(),e.enableThumb()),e.updateThumb(),u="thumb"});$("#page-container").width(),$(".exampleContainer").width();var _,x=$("input[type='search']"),k=$("button[data-search='clear']"),y=$("button[data-search='prev']"),E=$("button[data-search='next']"),I=$(".content"),B=0;x.on("input",function(){var e=this.value;I.unmark({done:function(){I.mark(e,{acrossElements:!0,separateWordSearch:!0,done:function(){_=I.find("mark"),B=0,jumpTo()}})}})}),k.on("click",function(){I.unmark(),x.val("").focus()}),E.add(y).on("click",function(){_.length&&((B+=$(this).is(y)?-1:1)<0&&(B=_.length-1),B>_.length-1&&(B=0),jumpTo())}),e.getCurPgIdx=function(){return g.cur_page_idx+1},e.drawing=function(){drawStatus=!0,!1;$(".drawBoardGp").length;$(".drawBoardGp").css("z-index",30);SVG().addTo(".drawBoardGp").rect(100,100).fill("#f06")},e.selectDraw=function(){drawStatus=!1,!0,$("#drawBoard").unbind("mousedown"),SVG.select("rect.my-rect").click(function(e){var t=SVG.select("rect.selected");t.selectize(!1),t.removeClass("selected"),this.selectize(),this.addClass("selected")},!1)},t&&(g.cur_page_idx=t,e.updatePg(),e.updateThumb())},e.goTo=function(e){var t=location.href;location.href=e,window.history.replaceState(null,null,t)},e.jumpTo=function(e){var t=$(e)[searchData.time],a=($(t).closest(".pf"),parseInt($(t).closest(".pf").attr("data-page-no"))-1);if(a){var n=$(t).closest(".t").attr("class"),o=$(t).offset().top;$(t).closest(".pc").offset();n=n.split(" ");var i=document.querySelector("."+n[3]);getComputedStyle(i),parseFloat(o);g.scroll_to(a)}},e.searchTxt=function(){$("#txtFinder").val();var e=window.getSelection().getRangeAt(0).getBoundingClientRect();g.scroll_to(index,e)},interact(".resize-drag").resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(e){var t=e.target,a=parseFloat(t.getAttribute("data-x"))||0,n=parseFloat(t.getAttribute("data-y"))||0;t.style.width=e.rect.width+"px",t.style.height=e.rect.height+"px",a+=e.deltaRect.left,n+=e.deltaRect.top,t.style.transform="translate("+a+"px,"+n+"px)",t.setAttribute("data-x",a),t.setAttribute("data-y",n)}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:100,height:50}})],inertia:!0}).draggable({listeners:{move:window.dragMoveListener},inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})]}),interact(".draggable").draggable({inertia:!0,restrict:{restriction:"parent",endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:h,onend:function(t){e.enableScroll()}}),interact(".draggableHeader").draggable({inertia:!0,restrict:{restriction:"#page-container",endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:function(t,a){e.disableScroll();var n,o,i=/translate\((-?[\d\.]+)px,\s*(-?[\d\.]+)px\)/i,r=/scale\((-?[\d\.]+)\)/i,s=t.target.parentNode,d=g.container;if(d){d.style.transform.match(r);var l=Number(g.scale)}var c=(v=s.style.transform||s.style.webkitTransform).match(i),u=v.match(r),p=(v.match(/rotate\((-?[\d\.]+)deg\)/i),1);u&&(p=Number(u[1]));c?(n=Number(c[1]),o=Number(c[2])):n=o=0;d?(n+=t.dx/l/p,o+=t.dy/l/p):(n+=t.dx,o+=t.dy);var h="translate("+n+"px, "+o+"px)";s.style.webkitTransform=s.style.transform=c?v.replace(i,h):v+" "+h;if(a){var v=a.get()||{};v.x=n,v.y=o,a.set(v)}},onend:function(t){e.enableScroll()}}),window.dragMoveListener=h}(ppcEbook);